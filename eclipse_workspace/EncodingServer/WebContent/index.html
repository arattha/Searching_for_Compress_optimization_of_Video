<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Management</title>
<link rel="stylesheet" type="text/css" href="/weblib/css/axicon/axicon.min.css">
<script type="text/javascript" src="//code.jquery.com/jquery-latest.min.js"></script>
<style type="text/css">
	.file-handler>div {
		width: calc(25% - 50px);
		padding: 20px;
		display: inline-block;
		border: 1px solid #aaa;
	}
</style>
<script type="text/javascript">
	$('document').ready(function() {
		sampleVideoList.refresh(0, 10);
	});
	
	var sampleVideoList = {
			offset: 0,
			amount: 10,
			total: 0,
			refresh : function() {
				var _this = this;
				var param = {};
				param.offset = this.offset;
				param.amount = this.amount;
				$.post('/EncodingServer/process/getSampleVideoList', param, function(resultJSON) {
					var resEnt = resultJSON.resultData.result_entries;
					var resFileList = resultJSON.resultData.fileList;
					$('#sample-video-list tbody').empty();
					_this.total = resEnt.total;
					
					for (var i in resFileList) {
						var temp = resFileList[i];
						$tr = $('<tr></tr>');
						$tr.append('<td>' + temp.seq + '</td>');
						$tr.append('<td>' + temp.fileName + '</td>');
						$tr.append('<td>' + temp.fileExt + '</td>');
						$tr.append('<td>' + temp.mimeType + '</td>');
						$tr.append('<td>' + temp.fileVolume + '</td>');
						$tr.append('<td>' + temp.vCodec + '</td>');
						$tr.append('<td>' + temp.aCodec + '</td>');
						$tr.append('<td>' + temp.width + '</td>');
						$tr.append('<td>' + temp.height + '</td>');
						$tr.append('<td>' + temp.storedServerId + '</td>');
						$tr.append('<td>' + temp.regdate + '</td>');
						$('#sample-video-list tbody').append($tr);
					}
				});
			},
			nextPage: function() {
				if (this.offset + this.amount <= total)
					this.offset += this.amount;
				this.refresh();
			},
			prevPage: function() {
				if (this.offset - this.amount > -1)
					this.offset -= this.amount;
				this.refresh();
			}
	}
	
	var encodingQueueList = {
			offset: 0,
			amount: 10,
			total: 0,
			refresh : function() {
				var _this = this;
				var param = {};
				param.offset = this.offset;
				param.amount = this.amount;
				$.post('/EncodingServer/process/getEncodingQueueList', param, function(resultJSON) {
					var resEnt = resultJSON.resultData.result_entries;
					var resFileList = resultJSON.resultData.fileList;
					$('#encoded-video-list tbody').empty();
					_this.total = resEnt.total;
					
					for (var i in resFileList) {
						var temp = resFileList[i];
						$tr = $('<tr></tr>');
						$tr.append('<td>' + temp.seq + '</td>');
						$tr.append('<td>' + temp.fileName + '</td>');
						$tr.append('<td>' + temp.fileExt + '</td>');
						$tr.append('<td>' + temp.mimeType + '</td>');
						$tr.append('<td>' + temp.fileVolume + '</td>');
						$tr.append('<td>' + temp.vCodec + '</td>');
						$tr.append('<td>' + temp.aCodec + '</td>');
						$tr.append('<td>' + temp.width + '</td>');
						$tr.append('<td>' + temp.height + '</td>');
						$tr.append('<td>' + temp.storedServerId + '</td>');
						$tr.append('<td>' + temp.regdate + '</td>');
						$('#encoded-video-list tbody').append($tr);
					}
				});
			},
			nextPage: function() {
				if (this.offset + this.amount <= total)
					this.offset += this.amount;
				this.refresh();
			},
			prevPage: function() {
				if (this.offset - this.amount > -1)
					this.offset -= this.amount;
				this.refresh();
			}
	}
</script>
</head>
<body>
<h1>Encoding Server version 1.0.2 u191014</h1>
<div class="file-handler">
	<div>
		<h2>Upload</h2>
		<form action="/EncodingServer/upload/file" method="post" enctype="multipart/form-data">
			<input type="file" name="upload_file">
			<input type="submit" value="gogo">
		</form>
	</div>
	
	<div>
		<h2>Original</h2>
		<form action="/EncodingServer/download/original">
			<input type="number" name="id">
			<input type="submit" value="gogo">
		</form>
	</div>
	
	<div>
		<h2>Encoded</h2>
		<form action="/EncodingServer/download/encoded">
			<input type="number" name="id">
			<input type="submit" value="gogo">
		</form>
	</div>
	
	<div>
		<h2>Log</h2>
		<form action="/EncodingServer/download/log">
			<input type="number" name="id">
			<input type="submit" value="gogo">
		</form>
	</div>
</div>

<div>
	<h2>샘플 영상 목록</h2>
	<table id="sample-video-list" border="1">
		<thead>
			<tr>
				<th>번호</th>
				<th>파일명</th>
				<th>확장자</th>
				<th>MIME</th>
				<th>용량</th>
				<th>비디오 코덱</th>
				<th>오디오 코덱</th>
				<th>비디오 너비</th>
				<th>비디오 높이</th>
				<th>저장된 서버 ID</th>
				<th>등록일자</th>
			</tr>
		</thead>
		<tbody>
		
		</tbody>
		<tfoot>
			<tr>
				<td colspan="11">
					<div style="text-align: center;">
						<button onclick="sampleVideoList.prevPage()">이전</button>
						<button onclick="sampleVideoList.refresh()">새로고침</button>
						<button onclick="sampleVideoList.nextPage()">다음</button>
					</div>
				</td>
			</tr>
		</tfoot>
	</table>
</div>

<div>
	<table id="encoded-video-list">
		<thead>
			<tr>
				<th>번호</th>
				<th>파일 ID</th>
				<th>프리셋 코드</th>
				<th>현재상태</th>
				<th>작업 후 용량</th>
				<th>인코딩 시작 날짜</th>
				<th>인코딩 종료 날짜</th>
				<th>작업 할당된 서버 ID</th>
				<th>등록일자</th>
			</tr>
		</thead>
		<tbody>
		
		</tbody>
		<tfoot>
			<tr>
				<td colspan="11">
					<div style="text-align: center;">
						<button onclick="sampleVideoList.prevPage()">이전</button>
						<button onclick="sampleVideoList.refresh()">새로고침</button>
						<button onclick="sampleVideoList.nextPage()">다음</button>
					</div>
				</td>
			</tr>
		</tfoot>
	</table>
</div>
</body>
</html>